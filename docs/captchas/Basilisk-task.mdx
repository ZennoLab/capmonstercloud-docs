---
sidebar_position: 13
sidebar_label: Basilisk
title: "Автоматическое распознавание и обход Basilisk капчи — Basilisk Task | API"
description: "Узнайте, как обойти капчу Basilisk с помощью API сервиса автоматического рапознавания и решения капч Capmonster Cloud!" 
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ParamItem from '@theme/ParamItem';
import MethodItem from '@theme/MethodItem';
import MethodDescription from '@theme/MethodDescription'
import PriceBlock from '../../src/theme/PriceBlock';
import PriceBlockWrap from '@theme/PriceBlockWrap';
import { ArticleHead } from '../../src/theme/ArticleHead';

<ArticleHead slug="captchas/Basilisk-task" />

# Basilisk - FaucetPay Captcha

<PriceBlockWrap>
  <PriceBlock title="Basilisk" captchaId="faucetpay" />
</PriceBlockWrap>

![](./images/basilisk/basilisk1.png)

:::warning **Внимание!**
CapMonster Cloud по умолчанию работает через встроенные прокси — они уже включены в стоимость. Указывать собственные прокси требуется только в тех случаях, когда сайт не принимает токен или доступ к встроенным сервисам ограничен. 

Если прокси с авторизацией по IP, то необходимо добавить адрес **65.21.190.34** в белый список.
:::


## Параметры запроса
<TabItem value="proxyless" label="CustomTask (без прокси)" default className="bordered-panel">
    <ParamItem title="type" required type="string" />
    **CustomTask**

    --- 

    <ParamItem title="class" required type="string" />
    **Basilisk**

    --- 

    <ParamItem title="websiteURL" required type="string" />
    Адрес основной страницы, на которой решается капча.

    --- 

    <ParamItem title="websiteKey" required type="string" />
    Можно найти в html коде в атрибуте **data-sitekey** контейнера с капчей или в payload POST-запроса на `https://basiliskcaptcha.com/challenge/check-site` в поле **site_key**

    --- 

    <ParamItem title="userAgent" type="string" />
    User-Agent браузера. <br />
  **Передавайте только актуальный UA от ОС Windows. Сейчас таковым является**: `userAgentPlaceholder`

    ---

    <ParamItem title="proxyType" type="string" />
    **http** - обычный http/https прокси;<br />
    **https** - используйте только если http не работает;<br />
    **socks4** - socks4 прокси;<br />
    **socks5** - socks5 прокси.

    --- 

    <ParamItem title="proxyAddress" type="string" />
    <p>
      IP адрес прокси IPv4/IPv6. Не допускается:
      - использование прозрачных прокси;
      - использование прокси на локальных машинах.
    </p>

    --- 

    <ParamItem title="proxyPort" type="integer" />
    Порт прокси.

    --- 

    <ParamItem title="proxyLogin" type="string" />
    Логин прокси-сервера.

    --- 

    <ParamItem title="proxyPassword" type="string" />
    Пароль прокси-сервера.

    --- 
</TabItem>

## Метод создания задачи
<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">
  <TabItem value="proxyless" label="CustomTask (без прокси)" default className="method-panel">
    <MethodItem>
      ```http
      https://api.capmonster.cloud/createTask
      ```
    </MethodItem>
    <MethodDescription>

    **Запрос**

    ```json
    {
      "clientKey": "API_KEY",
      "task": {
        "type": "CustomTask",
        "class": "Basilisk",
        "websiteURL": "https://domain.io/account/register",
        "websiteKey": "b7890hre5cf2544b2759c19fb2600897",
        "userAgent": "userAgentPlaceholder"
      }
    }
    ```

    **Ответ**

    ```json
    {
      "errorId": 0,
      "taskId": 407533072
    }
    ```

    </MethodDescription>
  </TabItem>

  <TabItem value="proxy" label="CustomTask (с использованием прокси)" className="method-panel">
    <MethodItem>
      ```http
      https://api.capmonster.cloud/createTask
      ```
    </MethodItem>
    <MethodDescription>

    **Запрос**

    ```json
    {
      "clientKey": "API_KEY",
      "task": {
        "type": "CustomTask",
        "class": "Basilisk",
        "websiteURL": "https://domain.io/account/register",
        "websiteKey": "b7890hre5cf2544b2759c19fb2600897",
        "userAgent": "userAgentPlaceholder",
        "proxyType": "http",
        "proxyAddress": "8.8.8.8",
        "proxyPort": 8080,
        "proxyLogin": "proxyLoginHere",
        "proxyPassword": "proxyPasswordHere"
      }
    }
    ```

    **Ответ**

    ```json
    {
      "errorId": 0,
      "taskId": 407533072
    }
    ```

    </MethodDescription>
  </TabItem>
</Tabs>

## Метод получения результата задачи
Используйте метод [getTaskResult](../api/methods/get-task-result.mdx), чтобы получить решение Basilisk.

<TabItem value="proxyless" label="CustomTask (без прокси)" default className="method-panel-full">
	<MethodItem>
		```http
		https://api.capmonster.cloud/getTaskResult
		```
	</MethodItem>
	<MethodDescription>
		**Запрос**
		```json
		{
		  "clientKey":"API_KEY",
		  "taskId": 407533072
		}
		```
		**Ответ**
		```json
		{
		   "errorId":0,
		   "status":"ready",
		   "solution": {
			  "data": {
				   "captcha_response": "5620301f30daf284b829fba66fa9b3d0"
			   },
			   "headers": {
				   "User-Agent": "userAgentPlaceholder"
			   }
		   }
		}
		```
	</MethodDescription>
</TabItem>

## Как найти все нужные параметры для создания задачи на решение

### Вручную

1. Откройте ваш сайт, где отображается капча, в браузере.
2. Правой кнопкой кликните по элементу капчи и выберите **Inspect**.

#### websiteKey

Во вкладке **Network** фильтруйте запросы по ключевым словам, связанным с капчей, например, *site_key*. В запросах будет присутствовать параметр *site_key* – параметр для идентификации сайта в процессе прохождения капчи:

![site-key-basilisk](images\basilisk\site-key.png)

### Автоматически

Для автоматизации поиска параметров их можно извлекать через **браузер** (обычный или headless, например, с **Playwright**) или напрямую из **HTTP-запросов**. Поскольку значения динамических параметров действуют недолго, их рекомендуется использовать сразу после получения.

:::warning **Важно!**
Приведённые фрагменты кода являются базовыми примерами для ознакомления в извлечении необходимых параметров. Точная реализация будет зависеть от вашего сайта с капчей, его структуры и используемых HTML-элементов и селекторов.
:::

<Tabs className="full-width-tabs filled-tabs request-tabs">
  <TabItem value="js" label="JavaScript" default className="method-panel">
    <details>
      <summary>Показать код (для браузера)</summary>
      ```js
      // Ищем элемент с атрибутом data-sitekey
      const captchaElement = document.querySelector('[data-sitekey]');

      // Извлекаем значение sitekey
      if (captchaElement) {
        const siteKey = captchaElement.getAttribute('data-sitekey');
        console.log('Found site-key:', siteKey);
      } else {
        console.log('site-key not found');
      }
      ```
    </details>

    <details>
      <summary>Показать код (Node.js)</summary>
      ```js
      import { chromium } from 'playwright';

      async function extractSiteKey() {
        const browser = await chromium.launch({ headless: true });
        const page = await browser.newPage();

        const url = 'https://example.com';
        await page.goto(url);

        // Ищем элемент с атрибутом data-sitekey
        const captchaElement = await page.$('[data-sitekey]');

        // Извлекаем значение sitekey
        if (captchaElement) {
          const siteKey = await captchaElement.getAttribute('data-sitekey');
          console.log('Found site-key:', siteKey);
        } else {
          console.log('site-key not found');
        }

        await browser.close();
      }

      extractSiteKey();
      ```
    </details>
  </TabItem>

  <TabItem value="python" label="Python" className="method-panel">
    <details>
      <summary>Показать код</summary>
      ```python
      import asyncio
      from playwright.async_api import async_playwright

      async def main():
          async with async_playwright() as p:
              browser = await p.chromium.launch(headless=False)
              page = await browser.new_page()

              url = 'https://example.com/captcha-page'
              await page.goto(url)

              # Ищем элемент с атрибутом data-sitekey
              captcha_element = await page.query_selector('[data-sitekey]')

              # Извлекаем значение sitekey, если элемент найден
              if captcha_element:
                  site_key = await captcha_element.get_attribute('data-sitekey')
                  print('Found site-key:', site_key)
              else:
                  print('site-key not found')

              await browser.close()

      asyncio.run(main())
      ```
    </details>
  </TabItem>

  <TabItem value="csharp" label="C#" className="method-panel">
    <details>
      <summary>Показать код</summary>
      ```csharp
      using System;
      using System.Threading.Tasks;
      using Microsoft.Playwright;

      class Program
      {
          static async Task Main(string[] args)
          {
              string url = "https://example.com/captcha-page";

              using var playwright = await Playwright.CreateAsync();
              var browser = await playwright.Chromium.LaunchAsync(new BrowserTypeLaunchOptions { 
              Headless = false });
              var page = await browser.NewPageAsync();

              await page.GotoAsync(url);

              // Ищем элемент с атрибутом data-sitekey
              var captchaElement = await page.QuerySelectorAsync("[data-sitekey]");

              // Извлекаем значение sitekey, если элемент найден
              if (captchaElement != null)
              {
                  var siteKey = await captchaElement.GetAttributeAsync("data-sitekey");
                  Console.WriteLine("Found site-key: " + siteKey);
              }
              else
              {
                  Console.WriteLine("site-key not found");
              }

              await browser.CloseAsync();
          }
      }
      ```
    </details>
  </TabItem>
</Tabs>

## Используйте библиотеку SDK

<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">

  <TabItem value="js" label="JavaScript" default className="method-panel">
  <details>
      <summary>Показать код (для браузера)</summary>

  ```js
 // https://github.com/ZennoLab/capmonstercloud-client-js

  import { CapMonsterCloudClientFactory, ClientOptions, BasiliskRequest } from '@zennolab_com/capmonstercloud-client';

  const API_KEY = "YOUR_API_KEY"; // Укажите ваш API-ключ CapMonster Cloud

  document.addEventListener("DOMContentLoaded", async () => {
      const client = CapMonsterCloudClientFactory.Create(
          new ClientOptions({ clientKey: API_KEY })
      );

      // Базовый пример без прокси
      // CapMonster Cloud автоматически использует свои прокси
      let basiliskRequest = new BasiliskRequest({
          websiteURL: "https://example.com",       // URL страницы с Basilisk
          websiteKey: "b3760bfe5cf4254b2759c19fg2698og""                 // Замените на корректное значение
      });

      // Пример использования вашего собственного прокси
      // Раскомментируйте данный блок, если вы хотите использовать собственный прокси
      /*
      const proxy = {
          proxyType: "http",
          proxyAddress: "123.45.67.89",
          proxyPort: 8080,
          proxyLogin: "username",
          proxyPassword: "password"
      };

      basiliskRequest = new BasiliskRequest({
          websiteURL: "https://example.com",
          websiteKey: "b3760bfe5cf4254b2759c19fg2698og",
          proxy,
          userAgent: "userAgentPlaceholder"
      });
      */

      // При необходимости можно проверить баланс
      const balance = await client.getBalance();
      console.log("Balance:", balance);

      const result = await client.Solve(basiliskRequest);
      console.log("Solution:", result);
  });
```
</details>


<details>
      <summary>Показать код (Node.js)</summary>
      ```JavaScript
      // https://github.com/ZennoLab/capmonstercloud-client-js

      import { CapMonsterCloudClientFactory, ClientOptions, BasiliskRequest } from '@zennolab_com/capmonstercloud-client';

      const API_KEY = "YOUR_API_KEY"; // Укажите ваш API-ключ CapMonster Cloud

      async function solveBasilisk() {
          const client = CapMonsterCloudClientFactory.Create(
              new ClientOptions({ clientKey: API_KEY })
          );

          // Базовый пример без прокси
          // CapMonster Cloud автоматически использует свои прокси
          let basiliskRequest = new BasiliskRequest({
              websiteURL: "https://example.com",       // URL страницы с Basilisk
              websiteKey: "b3760bfe5cf4254b2759c19fg2698og" // Замените на корректное значение
          });

          // Пример использования вашего собственного прокси
          // Раскомментируйте данный блок, если вы хотите использовать собственный прокси
          /*
          const proxy = {
              proxyType: "http",
              proxyAddress: "123.45.67.89",
              proxyPort: 8080,
              proxyLogin: "username",
              proxyPassword: "password"
          };

          basiliskRequest = new BasiliskRequest({
              websiteURL: "https://example.com",
              websiteKey: ""b3760bfe5cf4254b2759c19fg2698og",
              proxy,
              userAgent: "userAgentPlaceholder"
          });
          */

          // При необходимости можно проверить баланс
          const balance = await client.getBalance();
          console.log("Balance:", balance);

          const result = await client.Solve(basiliskRequest);
          console.log("Solution:", result);
      }

      solveBasilisk().catch(console.error);
```
</details>

  </TabItem>

  <TabItem value="python" label="Python" className="method-panel">

<details>
      <summary>Показать код</summary>
```python
# https://github.com/ZennoLab/capmonstercloud-client-python

import asyncio
from capmonstercloudclient import CapMonsterClient, ClientOptions
from capmonstercloudclient.requests import BasiliskCustomTaskRequest
# from capmonstercloudclient.requests.baseRequestWithProxy import ProxyInfo  # Раскомментируйте, если планируете использовать прокси

API_KEY = "YOUR_API_KEY"  # Укажите ваш API-ключ CapMonster Cloud

async def solve_basilisk():
    client_options = ClientOptions(api_key=API_KEY)
    cap_monster_client = CapMonsterClient(options=client_options)

    # Базовый пример без прокси
    # CapMonster Cloud автоматически использует свои прокси
    basilisk_request = BasiliskCustomTaskRequest(
        websiteUrl="https://example.com",                  # URL страницы с Basilisk
        websiteKey="b3760bfe5cf4254b2759c19fg2698og"      # Замените на корректное значение
    )

    # Пример использования вашего собственного прокси
    # Раскомментируйте данный блок, если хотите использовать собственный прокси

    # proxy = ProxyInfo(
    #     proxyType="http",
    #     proxyAddress="123.45.67.89",
    #     proxyPort=8080,
    #     proxyLogin="username",
    #     proxyPassword="password"
    # )
    #
    # basilisk_request = BasiliskCustomTaskRequest(
    #     websiteUrl="https://example.com",
    #     websiteKey="b3760bfe5cf4254b2759c19fg2698og",
    #     proxy=proxy
    # )

    # При необходимости можно проверить баланс
    balance = await cap_monster_client.get_balance()
    print("Balance:", balance)

    result = await cap_monster_client.solve_captcha(basilisk_request)
    print("Solution:", result)

asyncio.run(solve_basilisk())
```
</details>

  </TabItem>

  <TabItem value="csharp" label="C#" className="method-panel">

<details>
      <summary>Показать код</summary>
```csharp
// https://github.com/ZennoLab/capmonstercloud-client-dotnet

using System;
using System.Threading.Tasks;
using Zennolab.CapMonsterCloud;
using Zennolab.CapMonsterCloud.Requests;

class Program
{
    static async Task Main(string[] args)
    {
        // Укажите ваш API-ключ CapMonster Cloud
        var clientOptions = new ClientOptions
        {
            ClientKey = "YOUR_API_KEY"
        };

        var cmCloudClient = CapMonsterCloudClientFactory.Create(clientOptions);

        // Базовый пример без прокси
        // CapMonster Cloud автоматически использует свои прокси
        var basiliskRequest = new BasiliskCustomTaskRequest
        {
            WebsiteUrl = "https://example.com",                  // URL страницы с Basilisk
            WebsiteKey = "b3760bfe5cf4254b2759c19fg2698og"      // Замените на корректное значение
        };

        // Пример использования вашего собственного прокси
        // Раскомментируйте данный блок, если хотите использовать собственный прокси

        /*
        basiliskRequest = new BasiliskCustomTaskRequest
        {
            WebsiteUrl = "https://example.com",
            WebsiteKey = "b3760bfe5cf4254b2759c19fg2698og",
            Proxy = new ProxyContainer(
                "123.45.67.89",   
                8080,            
                ProxyType.Http, 
                "username",      
                "password" 
            ),
            UserAgent = "userAgentPlaceholder"
        };
        */

        // При необходимости можно проверить баланс
        var balance = await cmCloudClient.GetBalanceAsync();
        Console.WriteLine("Balance: " + balance);

        var basiliskResult = await cmCloudClient.SolveAsync(basiliskRequest);

        Console.WriteLine("Basilisk Solution Data: " + string.Join(", ", basiliskResult.Solution.Data));
        Console.WriteLine("Basilisk Solution Headers: " + string.Join(", ", basiliskResult.Solution.Headers));
    }
}
```
</details>
  </TabItem>

</Tabs>
