---
sidebar_position: 4
sidebar_label: HCaptchaTask
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ParamItem from '@theme/ParamItem';
import MethodItem from '@theme/MethodItem';
import MethodDescription from '@theme/MethodDescription'

# HCaptchaTask
The object contains data for hCaptcha solving task. To provide solid universality for solving this type of task we have reproduce every piece of environment used for an automation task you plan to complete. This includes: proxy access, browser's user-agent, cookies (optionally). This approach will eliminate all possible obstacles which might implement in the future.

This type of captcha might be solved a bit longer than usual image captcha, but this issue is compensated by the fact that g-captcha-response value we send to you is valid for the next 60 seconds after we solves your Captcha.

**Important!** If you are experiencing issues with accepting hcaptcha token, please contact CapMonster Cloud support with the provided url and sitekey. We will try to solve this issue as soon as possible.

## Request parameters

<Tabs className="full-width-tabs filled-tabs" groupId="captcha-type">
<TabItem value="proxyless" label="HCaptchaTaskProxyless (without proxy)" default className="bordered-panel">
    <ParamItem title="type" required type="string" />
    **HCaptchaTaskProxyless**

    ---

    <ParamItem title="websiteURL" required type="string" />
    Address of a webpage with hCaptcha.

    ---

    <ParamItem title="websiteKey" required type="string" />
    hCaptcha website key.

    ---

    <ParamItem title="isInvisible" type="boolean" />
    Use true for invisible version of hCaptcha.

    ---

    <ParamItem title="data" type="string" />
    <p>Custom data that is used in some implementations of hCaptcha, mostly with `isInvisible=true`.</p>

    ---

    <ParamItem title="userAgent" type="string" />
    **Pass only the actual UA from Windows OS. Now this is:** userAgentPlaceholder

    ---

    <ParamItem title="cookies" type="string" />
    <p>Additional cookies which we must use during interaction with target page.</p><p>**Format**: cookiename1=cookievalue1; cookiename2=cookievalue2</p>

    ---

    <ParamItem title="fallbackToActualUA" type="boolean" />
    <p>**true** - when specifying this parameter, we ignore the irrelevant User Agent that users send in the request, and return our own (relevant) one with getTaskResult. This will improve the acceptance of tokens.</p><p>**false** - we insert the User Agent that is specified in the request. If the User Agent is invalid, you will receive an error ERROR_WRONG_USERAGENT (USERAGENT IS EXPIRED in the log).</p>

  </TabItem>
  <TabItem value="proxy" label="HCaptchaTask (using proxy)" className="bordered-panel">
    <ParamItem title="type" required type="string" />
    **HCaptchaTask**

    ---

    <ParamItem title="websiteURL" required type="string" />
    Address of a webpage with hCaptcha.

    ---

    <ParamItem title="websiteKey" required type="string" />
    hCaptcha website key.

    ---

    <ParamItem title="isInvisible" type="boolean" />
    Use true for invisible version of hCaptcha.

    ---

    <ParamItem title="data" type="string" />
    <p>Custom data that is used in some implementations of hCaptcha, mostly with `isInvisible=true`.</p>

    ---

    <ParamItem title="userAgent" type="string" />
    **Pass only the actual UA from Windows OS. Now this is:** userAgentPlaceholder

    ---

    <ParamItem title="cookies" type="string" />
    <p>Additional cookies which we must use during interaction with target page.</p><p>**Format**: cookiename1=cookievalue1; cookiename2=cookievalue2</p>

    ---

    <ParamItem title="fallbackToActualUA" type="boolean" />
    <p>**true** - when specifying this parameter, we ignore the irrelevant User Agent that users send in the request, and return our own (relevant) one with getTaskResult. This will improve the acceptance of tokens.</p><p>**false** - we insert the User Agent that is specified in the request. If the User Agent is invalid, you will receive an error ERROR_WRONG_USERAGENT (USERAGENT IS EXPIRED in the log).</p>

    ---

    <ParamItem title="proxyType" required type="string" />
    **http** - regular http/https proxy;<br />**https** - try this option only if "http" doesn't work (required for some custom proxies);<br />**socks4** - socks4 proxy;<br />**socks5** - socks5 proxy.

    ---

    <ParamItem title="proxyAddress" required type="string" />
    <p>
      IPv4/IPv6 proxy IP address. Not allowed:
      - using of hostnames;
      - using transparent proxies (where you can see the client's IP);
      - using proxies on local machines.
    </p>

    ---

    <ParamItem title="proxyPort" required type="integer" />
    Proxy port.

    ---

    <ParamItem title="proxyLogin" type="string" />
    Proxy-server login.

    ---

    <ParamItem title="proxyPassword" type="string" />
    Proxy-server password.

  </TabItem>
  
</Tabs>

**Supported Types**<br/>
The supported image types are as follows:

|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.001.png)|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.002.png)|
| :- | :- |
|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.003.png)|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.004.png)|
|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.005.png)|![](./images/hcaptcha-task/Aspose.Words.fa5d4495-c9e9-41f5-8cb9-c4b900b4bbcf.006.png)|
|![](./images/hcaptcha-task/25940532.png)|


## Create task method

<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">
<TabItem value="proxyless" label="HCaptchaTaskProxyless (without proxy)" default className="method-panel">
    <MethodItem>
      ```http
      https://api.capmonster.cloud/createTask
      ```
    </MethodItem>
<MethodDescription>
**Request**
```json
{
    "clientKey":"API_KEY",
    "task":
    {
        "type":"HCaptchaTaskProxyless",
        "websiteURL":"https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
        "websiteKey":"472fc7af-86a4-4382-9a49-ca9090474471",
        "userAgent": "userAgentPlaceholder",
        "fallbackToActualUA":true
    }
}
```
**Response**
```json
{
  "errorId":0,
  "taskId":407533072
}
```

</MethodDescription>
  </TabItem>
  <TabItem value="proxy" label="HCaptchaTask (using proxy)" className="method-panel">
<MethodItem>
  ```http
  https://api.capmonster.cloud/createTask
  ```
</MethodItem>
<MethodDescription>
**Request**
```json
{
    "clientKey":"API_KEY",
    "task":
    {
        "type":"HCaptchaTask",
        "websiteURL":"https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
        "websiteKey":"472fc7af-86a4-4382-9a49-ca9090474471",
        "userAgent": "userAgentPlaceholder",
        "fallbackToActualUA":true,
        "proxyType":"http",
        "proxyAddress":"8.8.8.8",
        "proxyPort":8080,
        "proxyLogin":"proxyLoginHere",
        "proxyPassword":"proxyPasswordHere"
    }
}
```
**Response**
```json
{
  "errorId":0,
  "taskId":407533072
}
```
</MethodDescription>
  </TabItem>
  
</Tabs>


## Get task result method
Use the [getTaskResult](../api/methods/get-task-result.md) method to request answer for hCaptcha. You will get response within 10 - 80 secs period depending on service workload.

<TabItem value="proxyless" label="GeeTestTaskProxyless (without proxy)" default className="method-panel-full">
    <MethodItem>
```http
https://api.capmonster.cloud/getTaskResult
```
    </MethodItem>
    <MethodDescription>
**Request**
```json
{
  "clientKey":"API_KEY",
  "taskId": 407533072
}
```
**Response**
```json
{
  "errorId":0,
  "status":"ready",
  "solution": {
    "gRecaptchaResponse": "P1_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.hKdwYXNza2V5xQb9JvlblBqjTdKpourvlRNpOZLvJb0yJRmsXVFVjyxFWlL1wdYBXaPyFtnxwy2ukbMgwWn62-cjSc98Iw2XIPYWg5MNDKS4_7tBIhjY0PienoKy1...",
    "respKey": "E0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJkYXRhIjoidjQ3RjlqZGFYTllFQXlZZFYyRTlaWlBVQUdLaFpPakpRNjBXRTljVW40VnY3NnhuN2V3R0wwVWd1MW1Wai90WEdoYmt5a2NqVGlGdWpsSlpmVjcza...",
    "userAgent": "userAgentPlaceholder"
  }
}
```
  </MethodDescription>
  </TabItem>

<br />

|**Property**|**Type**|**Description**|
| :- | :- | :- |
|gRecaptchaResponse|String|Hash which should be inserted into hCaptcha submit form on target website.|
|userAgent|String|During submitting, you should use the same *User Agent* with which hCaptcha was solved.|
|respKey|String|The result of the "window.hcaptcha.getRespKey()" function when available. Some sites use this value for additional verification.|


## Use SDK Library

<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">
  <TabItem value="js" label="JavaScript" default className="method-panel">

```js
// https://github.com/ZennoLab/capmonstercloud-client-js

import { CapMonsterCloudClientFactory, ClientOptions, HCaptchaRequest } from '@zennolab_com/capmonstercloud-client';

document.addEventListener('DOMContentLoaded', async () => {
  const cmcClient = CapMonsterCloudClientFactory.Create(new ClientOptions({ clientKey: '<your capmonster.cloud API key>' }));
  console.log(await cmcClient.getBalance());

  const hCaptchaRequest = new HCaptchaRequest({
    websiteURL: 'https://lessons.zennolab.com/captchas/hcaptcha/?level=easy',
    websiteKey: '472fc7af-86a4-4382-9a49-ca9090474471',
    isInvisible: true,
    data: 'some data',
    proxyType: 'https',
    proxyAddress: 'https://proxy.com',
    proxyPort: 6045,
    proxyLogin: 'login',
    proxyPassword: 'password',
  });

  console.log(await cmcClient.Solve(hCaptchaRequest));
});
```
  </TabItem>
  
</Tabs>