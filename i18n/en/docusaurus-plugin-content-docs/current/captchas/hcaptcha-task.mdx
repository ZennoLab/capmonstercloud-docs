---
sidebar_position: 5
sidebar_label: HCaptchaTask
draft: true
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ParamItem from '@theme/ParamItem';
import MethodItem from '@theme/MethodItem';
import MethodDescription from '@theme/MethodDescription'
import PriceBlock from '@theme/PriceBlock';
import PriceBlockWrap from '@theme/PriceBlockWrap';
import { ArticleHead } from '../../../../../src/theme/ArticleHead';

<ArticleHead slug="captchas/hcaptcha-task" />

# HCaptchaTask

<PriceBlockWrap>
  <PriceBlock title="hCaptcha" name="hCaptchaToken"/>
  <PriceBlock title="hCaptcha Enterprise" name="hCaptchaEnterpriseToken"/>
</PriceBlockWrap>

This section contains information about the hCaptcha solving task. To provide solid universality for solving this type of task we have reproduce every piece of environment used for an automation task you plan to complete. This includes: proxy access, browser's user-agent, cookies (optionally). This approach will eliminate all possible obstacles which might implement in the future.

This type of captcha might be solved a bit longer than usual image captcha, but this issue is compensated by the fact that `g-captcha-response` value we send to you is valid for the next 60 seconds after we solves your Captcha.

:::warning **Attention!**
CapMonster Cloud uses built-in proxies by default — their cost is already included in the service. You only need to specify your own proxies in cases where the website does not accept the token or access to the built-in services is restricted.

If you are using a proxy with IP authorization, make sure to whitelist the address **65.21.190.34**.
:::

## Request parameters

<Tabs className="full-width-tabs filled-tabs" groupId="captcha-type">
  <TabItem value="proxyless" label="HCaptchaTask (without proxy)" default className="bordered-panel">
    <ParamItem title="type" required type="string" />
    **HCaptchaTask**

    ---

    <ParamItem title="websiteURL" required type="string" />
    Address of a webpage with hCaptcha.

    ---

    <ParamItem title="websiteKey" required type="string" />
    hCaptcha website key.

    ---

    <ParamItem title="isInvisible" type="boolean" />
    Use true for invisible version of hCaptcha.

    ---

    <ParamItem title="data" type="string" />
    <p>Custom data that is used in some implementations of hCaptcha, mostly with `isInvisible=true`. <br/>
	The value of the data field can be taken from the `rqdata` parameter, with which the captcha is rendered. </p>

    ---

    <ParamItem title="userAgent" type="string" />
    **Pass only the actual UA from Windows OS. Now this is:** userAgentPlaceholder

    ---

    <ParamItem title="cookies" type="string" />
    <p>Additional cookies which we must use during interaction with target page.</p><p>**Format**: cookiename1=cookievalue1; cookiename2=cookievalue2</p>

    ---

    <ParamItem title="fallbackToActualUA" type="boolean" />
    <p>**true** - when specifying this parameter, we ignore the irrelevant User Agent that users send in the request, and return our own (relevant) one with getTaskResult. This will improve the acceptance of tokens.</p><p>**false** - we insert the User Agent that is specified in the request. If the User Agent is invalid, you will receive an error ERROR_WRONG_USERAGENT (USERAGENT IS EXPIRED in the log).</p>

  </TabItem>
  
  <TabItem value="proxy" label="HCaptchaTask (using proxy)" className="bordered-panel">
    <ParamItem title="type" required type="string" />
    **HCaptchaTask**

    ---

    <ParamItem title="websiteURL" required type="string" />
    Address of a webpage with hCaptcha.

    ---

    <ParamItem title="websiteKey" required type="string" />
    hCaptcha website key.

    ---

    <ParamItem title="isInvisible" type="boolean" />
    Use true for invisible version of hCaptcha.

    ---

    <ParamItem title="data" type="string" />
    <p>Custom data that is used in some implementations of hCaptcha, mostly with `isInvisible=true`. <br/>
	The value of the data field can be taken from the `rqdata` parameter, with which the captcha is rendered. </p>

    ---

    <ParamItem title="userAgent" type="string" />
    **Pass only the actual UA from Windows OS. Now this is:** userAgentPlaceholder

    ---

    <ParamItem title="cookies" type="string" />
    <p>Additional cookies which we must use during interaction with target page.</p><p>**Format**: cookiename1=cookievalue1; cookiename2=cookievalue2</p>

    ---

    <ParamItem title="fallbackToActualUA" type="boolean" />
    <p>**true** - when specifying this parameter, we ignore the irrelevant User Agent that users send in the request, and return our own (relevant) one with getTaskResult. This will improve the acceptance of tokens.</p><p>**false** - we insert the User Agent that is specified in the request. If the User Agent is invalid, you will receive an error ERROR_WRONG_USERAGENT (USERAGENT IS EXPIRED in the log).</p>

    ---

    <ParamItem title="proxyType" required type="string" />
    **http** - regular http/https proxy;<br />**https** - try this option only if "http" doesn't work (required for some custom proxies);<br />**socks4** - socks4 proxy;<br />**socks5** - socks5 proxy.

    ---

    <ParamItem title="proxyAddress" required type="string" />
    <p>
      IPv4/IPv6 proxy IP address. Not allowed:
      - using of hostnames;
      - using transparent proxies (where you can see the client's IP);
      - using proxies on local machines.
    </p>

    ---

    <ParamItem title="proxyPort" required type="integer" />
    Proxy port.

    ---

    <ParamItem title="proxyLogin" type="string" />
    Proxy-server login.

    ---

    <ParamItem title="proxyPassword" type="string" />
    Proxy-server password.

  </TabItem>
  
</Tabs>

## Supported task types

All main task types are supported, for example:

* **DragAndDrop** – dragging elements to the correct positions
* **Click** – clicking on an element
* **3x3 / YesNo** – selecting images according to the given condition


## Create task method

<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">
	<TabItem value="proxyless" label="HCaptchaTask (without proxy)" default className="method-panel">
		<MethodItem>
			```http
			https://api.capmonster.cloud/createTask
			```
		</MethodItem>
		<MethodDescription>
			**Request**
  ```json
  {
    "clientKey":"API_KEY",
    "task":
    {
      "type":"HCaptchaTask",
      "websiteURL":"https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
      "websiteKey":"472fc7af-86a4-4382-9a49-ca9090474471",
      "userAgent": "userAgentPlaceholder",
      "fallbackToActualUA":true
    }
  }
  ```
			**Response**
  ```json
  {
    "errorId":0,
    "taskId":407533072
  }
  ```
		</MethodDescription>
	</TabItem>

	<TabItem value="proxy" label="HCaptchaTask (using proxy)" className="method-panel">
		<MethodItem>
			```http
			https://api.capmonster.cloud/createTask
			```
		</MethodItem>
		<MethodDescription>
			**Request**
  ```json
  {
    "clientKey":"API_KEY",
    "task":
    {
      "type":"HCaptchaTask",
      "websiteURL":"https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
      "websiteKey":"472fc7af-86a4-4382-9a49-ca9090474471",
      "userAgent": "userAgentPlaceholder",
      "fallbackToActualUA":true,
      "proxyType":"http",
      "proxyAddress":"8.8.8.8",
      "proxyPort":8080,
      "proxyLogin":"proxyLoginHere",
      "proxyPassword":"proxyPasswordHere"
    }
  }
  ```
			**Response**
  ```json
  {
    "errorId":0,
    "taskId":407533072
  }
  ```
		</MethodDescription>
	</TabItem>
  
</Tabs>


## Get task result method
Use the [getTaskResult](../api/methods/get-task-result.mdx) method to request answer for hCaptcha. You will get response within 10 - 80 secs period depending on service workload.

<TabItem value="proxyless" label="HCaptchaTask (without proxy)" default className="method-panel-full">
	<MethodItem>
		```http
		https://api.capmonster.cloud/getTaskResult
		```
	</MethodItem>
	<MethodDescription>
		**Request**
		```json
		{
		  "clientKey":"API_KEY",
		  "taskId": 407533072
		}
		```
		**Response**
 ```json
  {
    "errorId": 0,
    "status": "ready",
    "solution": {
      "gRecaptchaResponse": "P1_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.hKdwYXNza2V5xQb9JvlblBqjTdKpourvlRNpOZLvJb0yJRmsXVFVjyxFWlL1wdYBXaPyFtnxwy2ukbMgwWn62-cjSc98Iw2XIPYWg5MNDKS4_7tBIhjY0PienoKy1...",
      "respKey": "E0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJkYXRhIjoidjQ3RjlqZGFYTllFQXlZZFYyRTlaWlBVQUdLaFpPakpRNjBXRTljVW40VnY3NnhuN2V3R0wwVWd1MW1Wai90WEdoYmt5a2NqVGlGdWpsSlpmVjcza...",
      "userAgent": "userAgentPlaceholder"
    }
  }
  ```
	</MethodDescription>
</TabItem>

<br />

|**Property**|**Type**|**Description**|
| :- | :- | :- |
|gRecaptchaResponse|String|Hash which should be inserted into hCaptcha submit form on target website.|
|userAgent|String|During submitting, you should use the same *User Agent* with which hCaptcha was solved.|
|respKey|String|The result of the "window.hcaptcha.getRespKey()" function when available. Some sites use this value for additional verification.|

---

# Obtaining hCaptcha parameters

To successfully solve hCaptcha via API, you must obtain the required page parameters: `websiteKey`, and for the Invisible version — also `data` (`rqdata`).

Below are the main methods for locating them.

---

## 1. `websiteKey` parameter

### Method 1: Using the Network tab

1. Open **Developer Tools (DevTools)**.
2. Go to the **Network** tab.
3. Reload the page with hCaptcha.
4. In the list of requests, find a URL that starts with:

```

checksiteconfig?v=

```

5. For quick search, press:

   * **Ctrl + F** (Windows)
   * **Command + F** (macOS)

   and enter the keyword:

```

key

````

The `sitekey` parameter will appear in the matched requests — this is the `websiteKey` value.

---

### Method 2: Using the Elements tab

1. Open the **Elements** tab.
2. Search the page for:

   * `data-sitekey`
   * `sitekey`

Most commonly, the parameter looks like this:

```html
<div class="h-captcha" data-sitekey="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"></div>
````

The value of the `data-sitekey` attribute is your `websiteKey`.

---

## 2. `data` (rqdata) Parameter — for HCaptcha Invisible

On some websites (especially when using the Invisible version), the additional `rqdata` parameter is required.

### Important

The `rqdata` value:

* is **single-use**;
* is regenerated every time the page is refreshed;
* cannot be reused — using an old value will result in an error.

---

### Method 1: Searching in the page source code

Sometimes the parameter can be found directly in JavaScript code, for example:

```js
hcaptcha.setData({ rqdata: "value" })
```

In this case, `"value"` is the required `data` parameter.

---

### Method 2: Using the Network tab

1. Open **DevTools → Network**.
2. Reload the page with the captcha.
3. Press **Ctrl + F** (or Command + F on macOS).
4. Enter in the search field:

```
data
```

Most often, the parameter appears in requests related to:

* authorization (`login`)
* registration (`signup`)
* action confirmations

Review these requests and locate the `rqdata` field.

---

## 3. Searching parameters in the `refreshcaptcha` Request

On some websites, hCaptcha parameters are passed through a special request:

```
refreshcaptcha
```

### Steps:

1. Open **DevTools → Network**.
2. Reload the page.
3. Find the `refreshcaptcha` request.
4. Go to the **Response** tab.

For the CapMonster Cloud service, the following parameters are required in this case:

* `gid`
* `sitekey`

### Important

The `gid` value corresponds to the `data` parameter.

When creating the solving request:

* `sitekey` → use as `websiteKey`
* `gid` → use as `data`

---

## 4. Searching parameters in website API requests

Sometimes hCaptcha parameters are not visible directly but are included inside internal website API requests.

Such requests most often occur:

* during authorization,
* during registration,
* when submitting a form.

For example:

```
https://authenticate.example.com/api/v1/login
```

Open the relevant request in the **Network** tab and check:

* the request body (Request Payload),
* the server response (Response).

Parameters such as `sitekey`, `rqdata`, and `gid` may be included inside this data.

---

## Recommendations

* Always refresh the page before copying `rqdata`.
* Make sure the parameters are not generated dynamically.
* If the parameter is not present in the HTML, check the Network requests.

---


## Use SDK Library

<Tabs className="full-width-tabs filled-tabs request-tabs" groupId="captcha-type">
  <TabItem value="js" label="JavaScript" default className="method-panel">
  <details>
      <summary>Show code (for browser)</summary>
```javascript
// https://github.com/ZennoLab/capmonstercloud-client-js

import { CapMonsterCloudClientFactory, ClientOptions, HCaptchaRequest } from '@zennolab_com/capmonstercloud-client';

const API_KEY = "YOUR_API_KEY"; // Specify your CapMonster Cloud API key

document.addEventListener("DOMContentLoaded", async () => {
    const client = CapMonsterCloudClientFactory.Create(
        new ClientOptions({ clientKey: API_KEY })
    );

    // Basic example without proxy
    // CapMonster Cloud automatically uses its own proxies
    let hcaptchaRequest = new HCaptchaRequest({
        websiteURL: "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy", // URL of the page with hCaptcha
        websiteKey: "472fc7af-86a4-4382-9a49-ca9090474471",
        isInvisible: false,                         // true -- if Invisible hCaptcha is used
        data: "rqdata_value_if_required"            // Required for some Invisible implementations
    });

    // Example of using your own proxy
    // Uncomment this block if you want to use your own proxy
    /*
    const proxy = {
        proxyType: "http",
        proxyAddress: "123.45.67.89",
        proxyPort: 8080,
        proxyLogin: "username",
        proxyPassword: "password"
    };

    hcaptchaRequest = new HCaptchaRequest({
        websiteURL: "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
        websiteKey: "472fc7af-86a4-4382-9a49-ca9090474471",
        isInvisible: false,
        data: "rqdata_value_if_required",
        proxy,
        userAgent: "userAgentPlaceholder"
    });
    */

    // Optionally, you can check the balance
    const balance = await client.getBalance();
    console.log("Balance:", balance);

    const result = await client.Solve(hcaptchaRequest);
    console.log("Solution:", result);
});
```
</details>

<details>
      <summary>Show code (Node.js)</summary>
```javascript
// https://github.com/ZennoLab/capmonstercloud-client-js

import { CapMonsterCloudClientFactory, ClientOptions, HCaptchaRequest } from '@zennolab_com/capmonstercloud-client';

const API_KEY = "YOUR_API_KEY"; // Specify your CapMonster Cloud API key

async function solveHCaptcha() {
    const client = CapMonsterCloudClientFactory.Create(
        new ClientOptions({ clientKey: API_KEY })
    );

    // Basic example without proxy
    // CapMonster Cloud automatically uses its own proxies
    let hcaptchaRequest = new HCaptchaRequest({
        websiteURL: "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy", // URL of the page with hCaptcha
        websiteKey: "472fc7af-86a4-4382-9a49-ca9090474471",
        isInvisible: false,                         // true -- if Invisible hCaptcha is used
        data: "rqdata_value_if_required"            // Required for some Invisible implementations
    });

    // Example of using your own proxy
    // Uncomment this block if you want to use your own proxy

    /*
    const proxy = {
        proxyType: "http",
        proxyAddress: "123.45.67.89",
        proxyPort: 8080,
        proxyLogin: "username",
        proxyPassword: "password"
    };

    hcaptchaRequest = new HCaptchaRequest({
        websiteURL: "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
        websiteKey: "472fc7af-86a4-4382-9a49-ca9090474471",
        isInvisible: false,
        data: "rqdata_value_if_required",
        proxy,
        userAgent: "userAgentPlaceholder"
    });
    */

    // Optionally, you can check the balance
    const balance = await client.getBalance();
    console.log("Balance:", balance);

    const result = await client.Solve(hcaptchaRequest);
    console.log("Solution:", result);
}

solveHCaptcha().catch(console.error);
```
</details>

  </TabItem>

  <TabItem value="python" label="Python" className="method-panel">
```python
# https://github.com/ZennoLab/capmonstercloud-client-python

import asyncio
from capmonstercloudclient import CapMonsterClient, ClientOptions
from capmonstercloudclient.requests import HcaptchaRequest
# from capmonstercloudclient.requests.baseRequestWithProxy import ProxyInfo  # Uncomment if you plan to use a proxy

API_KEY = "YOUR_API_KEY"  # Specify your CapMonster Cloud API key

async def solve_hcaptcha():
    client_options = ClientOptions(api_key=API_KEY)
    cap_monster_client = CapMonsterClient(options=client_options)

    # Basic example without proxy
    # CapMonster Cloud automatically uses its own proxies
    hcaptcha_request = HcaptchaRequest(
        websiteUrl="https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",  # URL of the page with the captcha
        websiteKey="472fc7af-86a4-4382-9a49-ca9090474471",
        isInvisible=False,  # True if Invisible hCaptcha is used
        userAgent="userAgentPlaceholder",
        fallbackToActualUA=True
    )

    # Example of using your own proxy
    # Uncomment this block if you want to use your own proxy

    # proxy = ProxyInfo(
    #     proxyType="http",
    #     proxyAddress="123.45.67.89",
    #     proxyPort=8080,
    #     proxyLogin="username",
    #     proxyPassword="password"
    # )
    #
    # hcaptcha_request = HcaptchaRequest(
    #     websiteUrl="https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
    #     websiteKey="472fc7af-86a4-4382-9a49-ca9090474471",
    #     isInvisible=False,
    #     userAgent="userAgentPlaceholder",
    #     fallbackToActualUA=True,
    #     proxy=proxy
    # )

    # Optionally, you can check the balance
    balance = await cap_monster_client.get_balance()
    print("Balance:", balance)

    result = await cap_monster_client.solve_captcha(hcaptcha_request)
    print("Solution:", result)

asyncio.run(solve_hcaptcha())
```
  </TabItem>

  <TabItem value="csharp" label="C#" className="method-panel">
```csharp
// https://github.com/ZennoLab/capmonstercloud-client-dotnet

using System;
using System.Threading.Tasks;
using Zennolab.CapMonsterCloud;
using Zennolab.CapMonsterCloud.Requests;

class Program
{
    static async Task Main(string[] args)
    {
        // Specify your CapMonster Cloud API key
        var clientOptions = new ClientOptions
        {
            ClientKey = "YOUR_API_KEY"
        };

        var cmCloudClient = CapMonsterCloudClientFactory.Create(clientOptions);

        // Basic example without proxy
        // CapMonster Cloud automatically uses its own proxies
        var hcaptchaRequest = new HCaptchaRequest
        {
            WebsiteUrl = "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy", // URL of the page with the captcha
            WebsiteKey = "472fc7af-86a4-4382-9a49-ca9090474471",
            Invisible = false,                          // true if using invisible hCaptcha
            UserAgent = "userAgentPlaceholder"
        };

        // Example of using your own proxy
        // Uncomment this block if you want to use your own proxy

        /*
        hcaptchaRequest = new HCaptchaRequest
        {
            WebsiteUrl = "https://lessons.zennolab.com/captchas/hcaptcha/?level=easy",
            WebsiteKey = "472fc7af-86a4-4382-9a49-ca9090474471",
            Invisible = false,
            UserAgent = "userAgentPlaceholder",

            Proxy = new ProxyContainer(
                "123.45.67.89",
                8080,
                ProxyType.Http,
                "username",
                "password"
            )
        };
        */

        // Optionally, you can check the balance
        var balance = await cmCloudClient.GetBalanceAsync();
        Console.WriteLine("Balance: " + balance);

        var hcaptchaResult = await cmCloudClient.SolveAsync(hcaptchaRequest);

        Console.WriteLine("HCaptcha Solution: " + hcaptchaResult.Solution.Value);
    }
}
```
  </TabItem>  
</Tabs>